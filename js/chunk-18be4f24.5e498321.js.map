{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack:///./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack:///./node_modules/core-js/internals/regexp-exec-abstract.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/echarts/lib/component/visualMapPiecewise.js","webpack:///./node_modules/echarts/lib/visual/visualSolution.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack:///./node_modules/echarts/lib/component/visualMap.js","webpack:///./node_modules/echarts/lib/visual/VisualMapping.js","webpack:///./node_modules/echarts/lib/visual/visualDefault.js","webpack:///./node_modules/core-js/internals/string-multibyte.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack:///./node_modules/echarts/lib/component/visualMapContinuous.js","webpack:///./node_modules/core-js/internals/regexp-exec.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/core-js/internals/regexp-sticky-helpers.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack:///./node_modules/core-js/modules/es.regexp.exec.js","webpack:///./node_modules/core-js/internals/object-to-string.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack:///./node_modules/echarts/lib/component/visualMap/typeDefaulter.js","webpack:///./node_modules/echarts/lib/component/visualMap/helper.js","webpack:///./node_modules/core-js/modules/es.object.to-string.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack:///./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js"],"names":["zrUtil","VisualMapView","graphic","_symbol","createSymbol","layout","helper","PiecewiseVisualMapView","extend","type","doRender","thisGroup","this","group","removeAll","visualMapModel","textGap","get","textStyleModel","textFont","getFont","textFill","getTextColor","itemAlign","_getItemAlign","itemSize","viewData","_getViewData","endsText","showLabel","retrieve","renderItem","item","piece","itemGroup","Group","onclick","bind","_onItemClick","_enableHoverLink","indexInModelPieceList","representValue","getRepresentValue","_createItemSymbol","visualState","getValueState","add","Text","style","x","y","text","textVerticalAlign","textAlign","opacity","_renderEndsText","each","viewPieceList","box","renderBackground","positionGroup","pieceIndex","onHoverLink","method","option","hoverLink","api","dispatchAction","batch","makeHighDownBatch","findTargetDataIndices","on","modelOption","orient","getItemAlign","align","map","getPieceList","index","inverse","reverse","slice","shapeParam","getControllerVisual","selected","clone","newKey","getSelectedMapKey","selectedMode","o","key","from","uid","visualMapId","id","_default","module","exports","_config","__DEV__","VisualMapModel","VisualMapping","visualDefault","_number","reformIntervals","PiecewiseModel","defaultOption","minOpen","maxOpen","itemWidth","itemHeight","itemSymbol","pieceList","categories","splitNumber","itemGap","optionUpdated","newOption","isInit","superApply","arguments","_pieceList","resetExtent","mode","_mode","_determineMode","resetMethods","call","_resetSelected","resetVisual","mappingOption","state","mappingMethod","dataExtent","getExtent","visual","completeVisualOption","visualTypesInPieces","visualTypes","listVisualTypes","isCategory","has","obj","visualType","isObject","hasOwnProperty","pieces","v","exists","stateList","target","prototype","apply","thisOption","hasSel","value","length","setSelected","findPieceIndex","result","eachTargetSeries","seriesModel","dataIndices","data","getData","getDataDimension","dataIndex","pIdx","push","seriesId","pieceInterval","interval","Infinity","getVisualMeta","getColorVisual","stops","outerColors","edge","unshift","curr","setStop","valueState","color","precision","Math","min","max","parseInt","splitStep","toFixed","close","formatValueText","cate","normalizeReverse","pieceListItem","label","closeList","infinityList","useMinMax","lg","names","i","retrieveVisuals","edgeSymbols","classof","regexpExec","R","S","exec","TypeError","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined","echarts","preprocessor","registerPreprocessor","hasKeys","name","createVisualMappings","supplementVisualOption","visualMappings","mappings","createMappings","visualData","isValidType","__hidden","__alphaForOpacity","Creater","replaceVisualOption","keys","applyVisual","scope","dimension","visualTypesMap","getVisual","getItemVisual","setVisual","setItemVisual","eachItem","valueOrIndex","rawDataItem","getRawDataItem","visualMap","len","prepareVisualTypes","incrementalApplyVisual","dim","progress","params","getDimension","next","numberUtil","DEFAULT_BAR_BOUND","ContinuousModel","calculable","range","realtime","hoverLinkDataSize","hoverLinkOnHandle","_resetRange","resetItemSize","_orient","isNaN","auto","isArray","symbolSize","controller","getSelected","dataInterval","asc","oVals","getColorStopValues","iVals","iIdx","oIdx","iLen","oLen","first","stopsLen","count","step","stopValues","LinearGradient","eventTool","sliderMove","modelUtil","linearMap","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","init","_shapes","_dataInterval","_handleEnds","_useHandle","_hoverLinkDataIndices","_dragging","_hovering","ecModel","payload","_buildView","_resetInterval","_renderBar","dataRangeText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","barGroup","position","_applyTransform","targetGroup","shapes","useHandle","_createBarGroup","outOfRange","createPolygon","inRange","getCursor","_dragHandle","textRect","getTextRect","textSize","width","height","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","createHandlePoints","handleLabel","draggable","drift","onmousemove","e","stop","event","ondragend","handleLabelPoint","indicator","attr","invisible","silent","indicatorLabel","indicatorLabelPoint","isEnd","dx","dy","vertex","_updateInterval","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","setStyle","fill","barColor","setShape","barPoints","_updateHandle","forceState","opts","convertOpacityToAlpha","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","handlesColor","sampleNumber","offset","currValue","scale","rotation","PI","textPoint","applyTransform","getTransform","_showIndicator","cursorValue","textValue","rangeSymbol","halfHoverLinkSize","pos","createIndicatorPoints","offsetX","offsetY","zr","getZr","_hoverLinkFromSeriesMouseOver","_hideIndicator","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","compressBatches","_dispatchHighDown","el","dataModel","getSeriesByIndex","seriesIndex","isTargetSeries","dataType","indices","off","element","global","transform","dispose","remove","points","cursor","Polygon","shape","isRange","extentMax","zrColor","CATEGORY_DEFAULT_VISUAL_INDEX","_normalizeData","normalizers","visualHandler","visualHandlers","getColorMapper","_doMap","normalizeVisualRange","preprocessForPiecewise","preprocessForSpecifiedCategory","assert","constructor","mapValueToVisual","normalized","getNormalizer","makeApplyVisual","isNormalized","doMapCategory","out","returnRGBArray","fastLerp","parsedVisual","stringify","linear","category","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","modifyHSL","colorSaturation","colorLightness","colorAlpha","modifyAlpha","makeDoMap","liftZ","symbol","getter","setter","symbolCfg","isString","doMapToArray","hasSpecialVisual","originIndex","categoryMap","visualArr","setVisualToOption","pop","doNotNeedPair","applyValue","round","loop","sourceExtent","parse","noop","littleThan","a","b","handler","addVisualHandler","eachVisual","callback","context","mapVisual","isPrimary","newVisual","newVal","hasVisual","ret","h","types","sort","type1","type2","indexOf","dependsOn","visualType1","visualType2","findClosestWhenOutside","possibleI","abs","pieceValue","updatePossible","val","newAbs","active","inactive","toInteger","requireObjectCoercible","createMethod","CONVERT_TO_STRING","$this","second","String","size","charCodeAt","charAt","codeAt","formatUtil","extendComponentView","autoPositionValues","left","right","top","bottom","render","padding","normalizeCssArray","rect","getBoundingRect","Rect","z2","stroke","lineWidth","targetValue","visualCluster","visualObj","defaultColor","controllerVisuals","visualMapping","model","positionElement","getBoxLayoutParams","getWidth","getHeight","regexpFlags","stickyHelpers","nativeExec","RegExp","nativeReplace","replace","patchedExec","UPDATES_LAST_INDEX_WRONG","re1","re2","lastIndex","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","PATCH","str","reCopy","match","re","sticky","flags","source","charsAdded","strCopy","multiline","input","runtime","Op","Object","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","object","skipTempReset","prev","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","fails","RE","s","f","visualSolution","VISUAL_PRIORITY","PRIORITY","VISUAL","COMPONENT","targetVisuals","resultVisual","mapping","registerVisual","createOnAllSeries","resetDefines","eachComponent","pipelineContext","large","visualMetaList","visualMeta","concreteDim","dimInfo","getDimensionInfo","$","proto","forced","TO_STRING_TAG_SUPPORT","DESCRIPTORS","defineProperty","FunctionPrototype","FunctionPrototypeToString","nameRE","NAME","configurable","opt","splitList","start","end","Component","registerSubTypeDefaulter","_layout","getLayoutRect","ecSize","realIndex","paramsSet","reals","fakeValue","layoutInput","rParam","margin","batchItem","dataIndexInside","highlightKey","componentIndex","redefine","unsafe","actionInfo","update","registerAction","mainType","query","wellKnownSymbol","createNonEnumerableProperty","SPECIES","REPLACE_SUPPORTS_NAMED_GROUPS","groups","REPLACE_KEEPS_$0","REPLACE","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","split","KEY","sham","SYMBOL","DELEGATES_TO_SYMBOL","O","DELEGATES_TO_EXEC","execCalled","nativeRegExpMethod","methods","nativeMethod","regexp","arg2","forceStringMethod","stringMethod","regexMethod","string","env","extendComponentModel","dependencies","replacableOptionKeys","dataBound","layoutMode","ignoreSize","show","zlevel","z","backgroundColor","borderColor","contentColor","inactiveColor","borderWidth","formatter","textStyle","parentModel","_dataExtent","mergeDefaultAndTheme","canvasSupported","getModel","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","eachSeries","normalizeToArray","is","isMinMax","isFunction","extent","list","optDim","listDimensions","dimensions","dimNames","dimName","isCalculationCoord","base","merge","completeSingle","defa","completeInactive","stateExist","stateAbsent","optExist","optAbsent","completeController","symbolExists","symbolSizeExists","visuals","parseFloat","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","sign","currDistSign","span","dist"],"mappings":"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","file":"js/chunk-18be4f24.5e498321.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar layout = require(\"../../util/layout\");\n\nvar helper = require(\"./helper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PiecewiseVisualMapView = VisualMapView.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, renderItem, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n\n    function renderItem(item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList);\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            textVerticalAlign: 'middle',\n            textAlign: itemAlign,\n            textFont: textFont,\n            textFill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLink: function (itemGroup, pieceIndex) {\n    itemGroup.on('mouseover', zrUtil.bind(onHoverLink, this, 'highlight')).on('mouseout', zrUtil.bind(onHoverLink, this, 'downplay'));\n\n    function onHoverLink(method) {\n      var visualMapModel = this.visualMapModel;\n      visualMapModel.option.hoverLink && this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _getItemAlign: function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        textVerticalAlign: 'middle',\n        textAlign: showLabel ? itemAlign : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n    group.add(itemGroup);\n  },\n\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n  _getViewData: function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n        endsText = endsText.slice().reverse();\n      }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  },\n\n  /**\n   * @private\n   */\n  _createItemSymbol: function (group, representValue, shapeParam) {\n    group.add(createSymbol(this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], this.getControllerVisual(representValue, 'color')));\n  },\n\n  /**\n   * @private\n   */\n  _onItemClick: function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (option.selectedMode === 'single') {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  }\n});\nvar _default = PiecewiseVisualMapView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar _number = require(\"../../util/number\");\n\nvar reformIntervals = _number.reformIntervals;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PiecewiseModel = VisualMapModel.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * Order Rule:\n   *\n   * option.categories / option.pieces / option.text / option.selected:\n   *     If !option.inverse,\n   *     Order when vertical: ['top', ..., 'bottom'].\n   *     Order when horizontal: ['left', ..., 'right'].\n   *     If option.inverse, the meaning of\n   *     the order should be reversed.\n   *\n   * this._pieceList:\n   *     The order is always [low, ..., high].\n   *\n   * Mapping from location to low-high:\n   *     If !option.inverse\n   *     When vertical, top is high.\n   *     When horizontal, right is high.\n   *     If option.inverse, reverse.\n   */\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    selected: null,\n    // Object. If not specified, means selected.\n    // When pieces and splitNumber: {'0': true, '5': true}\n    // When categories: {'cate1': false, 'cate3': true}\n    // When selected === false, means all unselected.\n    minOpen: false,\n    // Whether include values that smaller than `min`.\n    maxOpen: false,\n    // Whether include values that bigger than `max`.\n    align: 'auto',\n    // 'auto', 'left', 'right'\n    itemWidth: 20,\n    // When put the controller vertically, it is the length of\n    // horizontal side of each item. Otherwise, vertical side.\n    itemHeight: 14,\n    // When put the controller vertically, it is the length of\n    // vertical side of each item. Otherwise, horizontal side.\n    itemSymbol: 'roundRect',\n    pieceList: null,\n    // Each item is Object, with some of those attrs:\n    // {min, max, lt, gt, lte, gte, value,\n    // color, colorSaturation, colorAlpha, opacity,\n    // symbol, symbolSize}, which customize the range or visual\n    // coding of the certain piece. Besides, see \"Order Rule\".\n    categories: null,\n    // category names, like: ['some1', 'some2', 'some3'].\n    // Attr min/max are ignored when categories set. See \"Order Rule\"\n    splitNumber: 5,\n    // If set to 5, auto split five pieces equally.\n    // If set to 0 and component type not set, component type will be\n    // determined as \"continuous\". (It is less reasonable but for ec2\n    // compatibility, see echarts/component/visualMap/typeDefaulter)\n    selectedMode: 'multiple',\n    // Can be 'multiple' or 'single'.\n    itemGap: 10,\n    // The gap between two items, in px.\n    hoverLink: true,\n    // Enable hover highlight.\n    showLabel: null // By default, when text is used, label will hide (the logic\n    // is remained for compatibility reason)\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    PiecewiseModel.superApply(this, 'optionUpdated', arguments);\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     * @private\n     * @type {Array.<Object>}\n     */\n\n    this._pieceList = [];\n    this.resetExtent();\n    /**\n     * 'pieces', 'categories', 'splitNumber'\n     * @type {string}\n     */\n\n    var mode = this._mode = this._determineMode();\n\n    resetMethods[this._mode].call(this);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          var piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = 0;\n      zrUtil.each(this.stateList, function (state) {\n        exists |= has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && (zrUtil.isObject(obj[state]) ? obj[state].hasOwnProperty(visualType) : obj[state] === visualType // e.g., inRange: 'symbol'\n      );\n    }\n\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n  },\n  _resetSelected: function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel ? selected[key] = false : hasSel = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  },\n\n  /**\n   * @public\n   */\n  getSelectedMapKey: function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  },\n\n  /**\n   * @public\n   */\n  getPieceList: function () {\n    return this._pieceList;\n  },\n\n  /**\n   * @private\n   * @return {string}\n   */\n  _determineMode: function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getValueState: function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  },\n\n  /**\n   * @public\n   * @params {number} pieceIndex piece index in visualMapModel.getPieceList()\n   * @return {Array.<Object>} [{seriesId, dataIndex: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (pieceIndex) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, this._pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @private\n   * @param {Object} piece piece.value or piece.interval is required.\n   * @return {number} Can be Infinity or -Infinity\n   */\n  getRepresentValue: function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  },\n  getVisualMeta: function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = [];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      });\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  }\n});\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      pieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      pieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      pieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function () {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME category模式也使用pieceList，但在visualMapping中不是使用pieceList。\n      // 是否改一致。\n      this._pieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, this._pieceList);\n  },\n  pieces: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close[1] = 0);\n\n        if (interval[0] === interval[1] && close[0] && close[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      pieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, pieceList); // Only pieces\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', '≤'][close[1]], ['>', '≥'][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nvar _default = PiecewiseModel;\nmodule.exports = _default;","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.github.io/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/PiecewiseModel\");\n\nrequire(\"./visualMap/PiecewiseView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapping = require(\"./VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name in obj) {\n      if (obj.hasOwnProperty(name)) {\n        return true;\n      }\n    }\n  }\n}\n/**\n * @param {Object} option\n * @param {Array.<string>} stateList\n * @param {Function} [supplementVisualOption]\n * @return {Object} visualMappings <state, <visualType, module:echarts/visual/VisualMapping>>\n */\n\n\nfunction createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\n/**\n * @param {Object} thisOption\n * @param {Object} newOption\n * @param {Array.<string>} keys\n */\n\n\nfunction replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {module:echarts/data/List} list\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {object} [scope] Scope for getValueState\n * @param {string} [dimension] Concrete dimension, if used.\n */\n// ???! handle brush?\n\n\nfunction applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return data.getItemVisual(dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    data.setItemVisual(dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {number} [dim] dimension or dimension index.\n */\n\n\nfunction incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n\n  function progress(params, data) {\n    if (dim != null) {\n      dim = data.getDimension(dim);\n    }\n\n    function getVisual(key) {\n      return data.getItemVisual(dataIndex, key);\n    }\n\n    function setVisual(key, value) {\n      data.setItemVisual(dataIndex, key, value);\n    }\n\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n      if (rawDataItem && rawDataItem.visualMap === false) {\n        continue;\n      }\n\n      var value = dim != null ? data.get(dim, dataIndex, true) : dataIndex;\n      var valueState = getValueState(value);\n      var mappings = visualMappings[valueState];\n      var visualTypes = visualTypesMap[valueState];\n\n      for (var i = 0, len = visualTypes.length; i < len; i++) {\n        var type = visualTypes[i];\n        mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n      }\n    }\n  }\n\n  return {\n    progress: progress\n  };\n}\n\nexports.createVisualMappings = createVisualMappings;\nexports.replaceVisualOption = replaceVisualOption;\nexports.applyVisual = applyVisual;\nexports.incrementalApplyVisual = incrementalApplyVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = VisualMapModel.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    align: 'auto',\n    // 'auto', 'left', 'right', 'top', 'bottom'\n    calculable: false,\n    // This prop effect default component type determine,\n    // See echarts/component/visualMap/typeDefaulter.\n    range: null,\n    // selected range. In default case `range` is [min, max]\n    // and can auto change along with modification of min max,\n    // util use specifid a range.\n    realtime: true,\n    // Whether realtime update.\n    itemHeight: null,\n    // The length of the range control edge.\n    itemWidth: null,\n    // The length of the other side.\n    hoverLink: true,\n    // Enable hover highlight.\n    hoverLinkDataSize: null,\n    // The size of hovered data.\n    hoverLinkOnHandle: null // Whether trigger hoverLink when hover handle.\n    // If not specified, follow the value of `realtime`.\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    ContinuousModel.superApply(this, 'optionUpdated', arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  resetItemSize: function () {\n    ContinuousModel.superApply(this, 'resetItemSize', arguments);\n    var itemSize = this.itemSize;\n    this._orient === 'horizontal' && itemSize.reverse();\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  },\n\n  /**\n   * @private\n   */\n  _resetRange: function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = 0; // For good looking.\n      }\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  },\n\n  /**\n   * @public\n   */\n  getSelected: function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  },\n\n  /**\n   * @override\n   */\n  getValueState: function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  },\n\n  /**\n   * @params {Array.<number>} range target value: range[0] <= value && value <= range[1]\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @implement\n   */\n  getVisualMeta: function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  }\n});\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nvar _default = ContinuousModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar helper = require(\"./helper\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = VisualMapView.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @override\n   */\n  init: function () {\n    ContinuousView.superApply(this, 'init', arguments);\n    /**\n     * @private\n     */\n\n    this._shapes = {};\n    /**\n     * @private\n     */\n\n    this._dataInterval = [];\n    /**\n     * @private\n     */\n\n    this._handleEnds = [];\n    /**\n     * @private\n     */\n\n    this._orient;\n    /**\n     * @private\n     */\n\n    this._useHandle;\n    /**\n     * @private\n     */\n\n    this._hoverLinkDataIndices = [];\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._hovering;\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _buildView: function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.barGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        textVerticalAlign: orient === 'horizontal' ? 'middle' : align,\n        textAlign: orient === 'horizontal' ? align : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderBar: function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var barGroup = shapes.barGroup = this._createBarGroup(itemAlign); // Bar\n\n\n    barGroup.add(shapes.outOfRange = createPolygon());\n    barGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    var textRect = visualMapModel.textStyleModel.getTextRect('国');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(barGroup, 0, itemSize, textSize, orient, itemAlign);\n\n      this._createHandle(barGroup, 1, itemSize, textSize, orient, itemAlign);\n    }\n\n    this._createIndicator(barGroup, itemSize, textSize, orient);\n\n    targetGroup.add(barGroup);\n  },\n\n  /**\n   * @private\n   */\n  _createHandle: function (barGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleThumb = createPolygon(createHandlePoints(handleIndex, textSize), getCursor(this._orient), onDrift, onDragEnd);\n    handleThumb.position[0] = itemSize[0];\n    barGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(handleLabel);\n    var handleLabelPoint = [orient === 'horizontal' ? textSize / 2 : textSize * 1.5, orient === 'horizontal' ? handleIndex === 0 ? -(textSize * 1.5) : textSize * 1.5 : handleIndex === 0 ? -textSize / 2 : textSize / 2];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  },\n\n  /**\n   * @private\n   */\n  _createIndicator: function (barGroup, itemSize, textSize, orient) {\n    var indicator = createPolygon([[0, 0]], 'move');\n    indicator.position[0] = itemSize[0];\n    indicator.attr({\n      invisible: true,\n      silent: true\n    });\n    barGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT + 3, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n  },\n\n  /**\n   * @private\n   */\n  _dragHandle: function (handleIndex, isEnd, dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.barGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  _updateInterval: function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor,\n      opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor,\n      opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  },\n\n  /**\n   * @private\n   */\n  _createBarVisual: function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  },\n\n  /**\n   * @private\n   */\n  _makeColorGradient: function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  },\n\n  /**\n   * @private\n   */\n  _createBarPoints: function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  },\n\n  /**\n   * @private\n   */\n  _createBarGroup: function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scale: itemAlign === 'bottom' ? [1, 1] : [-1, 1],\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scale: itemAlign === 'bottom' ? [-1, 1] : [1, 1],\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scale: itemAlign === 'left' ? [1, -1] : [-1, -1]\n    } : {\n      scale: itemAlign === 'left' ? [1, 1] : [-1, 1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _updateHandle: function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.position[1] = handleEnds[handleIndex]; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        textVerticalAlign: 'middle',\n        textAlign: this._applyTransform(this._orient === 'horizontal' ? handleIndex === 0 ? 'bottom' : 'top' : 'left', shapes.barGroup)\n      });\n    }, this);\n  },\n\n  /**\n   * @private\n   * @param {number} cursorValue\n   * @param {number} textValue\n   * @param {string} [rangeSymbol]\n   * @param {number} [halfHoverLinkSize]\n   */\n  _showIndicator: function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var pos = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.position[1] = pos;\n    indicator.attr('invisible', false);\n    indicator.setShape('points', createIndicatorPoints(!!rangeSymbol, halfHoverLinkSize, pos, itemSize[1]));\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    indicator.setStyle('fill', color); // Update handle label position.\n\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.barGroup);\n\n    var orient = this._orient;\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      textVerticalAlign: orient === 'horizontal' ? align : 'middle',\n      textAlign: orient === 'horizontal' ? 'center' : align,\n      x: textPoint[0],\n      y: textPoint[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkToSeries: function () {\n    var self = this;\n\n    this._shapes.barGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.barGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkFromSeries: function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doHoverLinkToSeries: function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, '≈ ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  },\n\n  /**\n   * @private\n   */\n  _hoverLinkFromSeriesMouseOver: function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || el.dataIndex == null) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(el.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(el.dataType);\n    var value = data.get(visualMapModel.getDataDimension(data), el.dataIndex, true);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _hideIndicator: function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkToSeries: function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkFromSeries: function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  },\n\n  /**\n   * @private\n   */\n  _applyTransform: function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return graphic[zrUtil.isArray(vertex) ? 'applyTransform' : 'transformDirection'](vertex, transform, inverse);\n  },\n\n  /**\n   * @private\n   */\n  _dispatchHighDown: function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  }\n});\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction createHandlePoints(handleIndex, textSize) {\n  return handleIndex === 0 ? [[0, 0], [textSize, 0], [textSize, -textSize]] : [[0, 0], [textSize, 0], [textSize, textSize]];\n}\n\nfunction createIndicatorPoints(isRange, halfHoverLinkSize, pos, extentMax) {\n  return isRange ? [// indicate range\n  [0, -mathMin(halfHoverLinkSize, mathMax(pos, 0))], [HOVER_LINK_OUT, 0], [0, mathMin(halfHoverLinkSize, mathMax(extentMax - pos, 0))]] : [// indicate single value\n  [0, 0], [5, -5], [5, 5]];\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = ContinuousView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./visualMapContinuous\");\n\nrequire(\"./visualMapPiecewise\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n/**\n * @param {Object} option\n * @param {string} [option.type] See visualHandlers.\n * @param {string} [option.mappingMethod] 'linear' or 'piecewise' or 'category' or 'fixed'\n * @param {Array.<number>=} [option.dataExtent] [minExtent, maxExtent],\n *                                              required when mappingMethod is 'linear'\n * @param {Array.<Object>=} [option.pieceList] [\n *                                             {value: someValue},\n *                                             {interval: [min1, max1], visual: {...}},\n *                                             {interval: [min2, max2]}\n *                                             ],\n *                                            required when mappingMethod is 'piecewise'.\n *                                            Visual for only each piece can be specified.\n * @param {Array.<string|Object>=} [option.categories] ['cate1', 'cate2']\n *                                            required when mappingMethod is 'category'.\n *                                            If no option.categories, categories is set\n *                                            as [0, 1, 2, ...].\n * @param {boolean} [option.loop=false] Whether loop mapping when mappingMethod is 'category'.\n * @param {(Array|Object|*)} [option.visual]  Visual data.\n *                                            when mappingMethod is 'category',\n *                                            visual data can be array or object\n *                                            (like: {cate1: '#222', none: '#fff'})\n *                                            or primary types (which represents\n *                                            defualt category visual), otherwise visual\n *                                            can be array or primary (which will be\n *                                            normalized to array).\n *\n */\n\nvar VisualMapping = function (option) {\n  var mappingMethod = option.mappingMethod;\n  var visualType = option.type;\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n\n  var thisOption = this.option = zrUtil.clone(option);\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.type = visualType;\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.mappingMethod = mappingMethod;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._normalizeData = normalizers[mappingMethod];\n  var visualHandler = visualHandlers[visualType];\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.applyVisual = visualHandler.applyVisual;\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.getColorMapper = visualHandler.getColorMapper;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._doMap = visualHandler._doMap[mappingMethod];\n\n  if (mappingMethod === 'piecewise') {\n    normalizeVisualRange(thisOption);\n    preprocessForPiecewise(thisOption);\n  } else if (mappingMethod === 'category') {\n    thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n    // which need no more preprocess except normalize visual.\n    : normalizeVisualRange(thisOption, true);\n  } else {\n    // mappingMethod === 'linear' or 'fixed'\n    zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n    normalizeVisualRange(thisOption);\n  }\n};\n\nVisualMapping.prototype = {\n  constructor: VisualMapping,\n  mapValueToVisual: function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._doMap(normalized, value);\n  },\n  getNormalizer: function () {\n    return zrUtil.bind(this._normalizeData, this);\n  }\n};\nvar visualHandlers = VisualMapping.visualHandlers = {\n  color: {\n    applyVisual: makeApplyVisual('color'),\n\n    /**\n     * Create a mapper function\n     * @return {Function}\n     */\n    getColorMapper: function () {\n      var thisOption = this.option;\n      return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n        !isNormalized && (value = this._normalizeData(value));\n        return doMapCategory.call(this, value);\n      } : function (value, isNormalized, out) {\n        // If output rgb array\n        // which will be much faster and useful in pixel manipulation\n        var returnRGBArray = !!out;\n        !isNormalized && (value = this._normalizeData(value));\n        out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n        return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n      }, this);\n    },\n    _doMap: {\n      linear: function (normalized) {\n        return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n      },\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  colorHue: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, value);\n  }),\n  colorSaturation: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, value);\n  }),\n  colorLightness: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, null, value);\n  }),\n  colorAlpha: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyAlpha(color, value);\n  }),\n  opacity: {\n    applyVisual: makeApplyVisual('opacity'),\n    _doMap: makeDoMap([0, 1])\n  },\n  liftZ: {\n    applyVisual: makeApplyVisual('liftZ'),\n    _doMap: {\n      linear: doMapFixed,\n      category: doMapFixed,\n      piecewise: doMapFixed,\n      fixed: doMapFixed\n    }\n  },\n  symbol: {\n    applyVisual: function (value, getter, setter) {\n      var symbolCfg = this.mapValueToVisual(value);\n\n      if (zrUtil.isString(symbolCfg)) {\n        setter('symbol', symbolCfg);\n      } else if (isObject(symbolCfg)) {\n        for (var name in symbolCfg) {\n          if (symbolCfg.hasOwnProperty(name)) {\n            setter(name, symbolCfg[name]);\n          }\n        }\n      }\n    },\n    _doMap: {\n      linear: doMapToArray,\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = doMapToArray.call(this, normalized);\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  symbolSize: {\n    applyVisual: makeApplyVisual('symbolSize'),\n    _doMap: makeDoMap([0, 1])\n  }\n};\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var visual = thisOption.visual;\n  var categoryMap = thisOption.categoryMap = {};\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      value = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), value));\n    },\n    _doMap: makeDoMap([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {};\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  return this.option.visual[0];\n}\n\nfunction makeDoMap(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n/**\n * List available visual types.\n *\n * @public\n * @return {Array.<string>}\n */\n\nVisualMapping.listVisualTypes = function () {\n  var visualTypes = [];\n  zrUtil.each(visualHandlers, function (handler, key) {\n    visualTypes.push(key);\n  });\n  return visualTypes;\n};\n/**\n * @public\n */\n\n\nVisualMapping.addVisualHandler = function (name, handler) {\n  visualHandlers[name] = handler;\n};\n/**\n * @public\n */\n\n\nVisualMapping.isValidType = function (visualType) {\n  return visualHandlers.hasOwnProperty(visualType);\n};\n/**\n * Convinent method.\n * Visual can be Object or Array or primary type.\n *\n * @public\n */\n\n\nVisualMapping.eachVisual = function (visual, callback, context) {\n  if (zrUtil.isObject(visual)) {\n    zrUtil.each(visual, callback, context);\n  } else {\n    callback.call(context, visual);\n  }\n};\n\nVisualMapping.mapVisual = function (visual, callback, context) {\n  var isPrimary;\n  var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n  VisualMapping.eachVisual(visual, function (v, key) {\n    var newVal = callback.call(context, v, key);\n    isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n  });\n  return newVisual;\n};\n/**\n * @public\n * @param {Object} obj\n * @return {Object} new object containers visual values.\n *                 If no visuals, return null.\n */\n\n\nVisualMapping.retrieveVisuals = function (obj) {\n  var ret = {};\n  var hasVisual;\n  obj && each(visualHandlers, function (h, visualType) {\n    if (obj.hasOwnProperty(visualType)) {\n      ret[visualType] = obj[visualType];\n      hasVisual = true;\n    }\n  });\n  return hasVisual ? ret : null;\n};\n/**\n * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n *\n * @public\n * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n * @return {Array.<string>} Sorted visual types.\n */\n\n\nVisualMapping.prepareVisualTypes = function (visualTypes) {\n  if (isObject(visualTypes)) {\n    var types = [];\n    each(visualTypes, function (item, type) {\n      types.push(type);\n    });\n    visualTypes = types;\n  } else if (zrUtil.isArray(visualTypes)) {\n    visualTypes = visualTypes.slice();\n  } else {\n    return [];\n  }\n\n  visualTypes.sort(function (type1, type2) {\n    // color should be front of colorSaturation, colorAlpha, ...\n    // symbol and symbolSize do not matter.\n    return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n  });\n  return visualTypes;\n};\n/**\n * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n * Other visuals are only depends on themself.\n *\n * @public\n * @param {string} visualType1\n * @param {string} visualType2\n * @return {boolean}\n */\n\n\nVisualMapping.dependsOn = function (visualType1, visualType2) {\n  return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n};\n/**\n * @param {number} value\n * @param {Array.<Object>} pieceList [{value: ..., interval: [min, max]}, ...]\n *                         Always from small to big.\n * @param {boolean} [findClosestWhenOutside=false]\n * @return {number} index\n */\n\n\nVisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n  var possibleI;\n  var abs = Infinity; // value has the higher priority.\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var pieceValue = pieceList[i].value;\n\n    if (pieceValue != null) {\n      if (pieceValue === value // FIXME\n      // It is supposed to compare value according to value type of dimension,\n      // but currently value type can exactly be string or number.\n      // Compromise for numeric-like string (like '12'), especially\n      // in the case that visualMap.categories is ['22', '33'].\n      || typeof pieceValue === 'string' && pieceValue === value + '') {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(pieceValue, i);\n    }\n  }\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var piece = pieceList[i];\n    var interval = piece.interval;\n    var close = piece.close;\n\n    if (interval) {\n      if (interval[0] === -Infinity) {\n        if (littleThan(close[1], value, interval[1])) {\n          return i;\n        }\n      } else if (interval[1] === Infinity) {\n        if (littleThan(close[0], interval[0], value)) {\n          return i;\n        }\n      } else if (littleThan(close[0], interval[0], value) && littleThan(close[1], value, interval[1])) {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(interval[0], i);\n      findClosestWhenOutside && updatePossible(interval[1], i);\n    }\n  }\n\n  if (findClosestWhenOutside) {\n    return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n  }\n\n  function updatePossible(val, index) {\n    var newAbs = Math.abs(val - value);\n\n    if (newAbs < abs) {\n      abs = newAbs;\n      possibleI = index;\n    }\n  }\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nvar _default = VisualMapping;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nvar _default = visualDefault;\nmodule.exports = _default;","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar layout = require(\"../../util/layout\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentView({\n  type: 'visualMap',\n\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n  autoPositionValues: {\n    left: 1,\n    right: 1,\n    top: 1,\n    bottom: 1\n  },\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/visualMap/visualMapModel}\n     */\n\n    this.visualMapModel;\n  },\n\n  /**\n   * @protected\n   */\n  render: function (visualMapModel, ecModel, api, payload) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender.apply(this, arguments);\n  },\n\n  /**\n   * @protected\n   */\n  renderBackground: function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new graphic.Rect({\n      z2: -1,\n      // Lay background rect on the lowest layer.\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  },\n\n  /**\n   * @protected\n   * @param {number} targetValue can be Infinity or -Infinity\n   * @param {string=} visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param {Object} [opts]\n   * @param {string=} [opts.forceState] Specify state, instead of using getValueState method.\n   * @param {string=} [opts.convertOpacityToAlpha=false] For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  getControllerVisual: function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'symbol') {\n      visualObj.symbol = visualMapModel.get('itemSymbol');\n    }\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  },\n\n  /**\n   * @protected\n   */\n  positionGroup: function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  },\n\n  /**\n   * @protected\n   * @abstract\n   */\n  doRender: zrUtil.noop\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/ContinuousModel\");\n\nrequire(\"./visualMap/ContinuousView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","'use strict';\nvar regexpFlags = require('./regexp-flags');\nvar stickyHelpers = require('./regexp-sticky-helpers');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","'use strict';\n\nvar fails = require('./fails');\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar VISUAL_PRIORITY = echarts.PRIORITY.VISUAL.COMPONENT;\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimension(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}); // Only support color.\n\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var concreteDim = visualMapModel.getDataDimension(data);\n        var dimInfo = data.getDimensionInfo(concreteDim);\n\n        if (dimInfo != null) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimInfo.index;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}); // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: seriesModel.getData().getVisual('color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\n\nfunction _default(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Component = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nComponent.registerSubTypeDefaulter('visualMap', function (option) {\n  // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n  return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/component/visualMap/VisualMapModel} visualMapModel\\\n * @param {module:echarts/ExtensionAPI} api\n * @param {Array.<number>} itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nfunction getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n\n\nfunction makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}\n\nexports.getItemAlign = getItemAlign;\nexports.makeHighDownBatch = makeHighDownBatch;","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n});","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center' ¦ 'left' ¦ 'right' ¦ {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top' ¦ 'bottom' ¦ 'center' ¦ {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal' ¦ 'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // 值域边框颜色\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // 值域边框线宽，单位px，默认为0（无边框）\n    padding: 5,\n    // 值域内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    //\n    precision: 0,\n    // 小数精度，默认为0，无小数点\n    color: null,\n    //颜色（deprecated，兼容ec2，顺序同pieces，不同于inRange/outOfRange）\n    formatter: null,\n    text: null,\n    // 文本，如['高', '低']，兼容ec2，text[0]对应高值，text[1]对应低值\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the defualt color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param {number} delta Move length.\n * @param {Array.<number>} handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param {Array.<number>} extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param {number|string} handleIndex Can be 'all', means that both move the two handleEnds.\n * @param {number} [minSpan] The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param {number} [maxSpan] The range of dataZoom can not be larger than that.\n * @return {Array.<number>} The input handleEnds.\n */\nfunction _default(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}\n\nmodule.exports = _default;"],"sourceRoot":""}